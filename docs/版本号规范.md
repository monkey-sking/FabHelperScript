# Fab Helper 脚本版本号规范

为了清晰地追踪脚本的开发进程、确保更新的可预测性，我们采用 **语义化版本控制（Semantic Versioning, SemVer）** 规范。

## 版本格式

版本号采用 `主版本号.次版本号.修订号`（`MAJOR.MINOR.PATCH`）的格式，发布时可添加日期标识 `MAJOR.MINOR.PATCH-YYYYMMDD`。

- **主版本号 (MAJOR)**: 进行不兼容的 API 或功能更改。
- **次版本号 (MINOR)**: 以向后兼容的方式添加功能。
- **修订号 (PATCH)**: 以向后兼容的方式修复错误。
- **日期标识 (YYYYMMDD)**: 可选，表示发布日期，格式为年月日。

---

## 更新规则详解

### 1. 主版本号 (MAJOR)

当您进行了**不兼容的重大更新**时，必须增加主版本号。这类更新通常意味着脚本的底层逻辑或数据结构发生了根本性变化，可能会导致旧版本的配置或存储数据失效。

**何时更新 MAJOR 版本：**
- 重构了数据存储结构（例如，从 `localStorage` 迁移到 `GM_setValue`，且格式不兼容）。
- 移除了某个核心功能。
- 对核心功能进行了重写，其用法和之前完全不同。

**示例：**
- 版本从 `1.5.2` 更新到 `2.0.0`。
- 版本从 `1.5.2-20250101` 更新到 `2.0.0-20250215`。

### 2. 次版本号 (MINOR)

当您**新增了功能**，并且这些功能是**向后兼容**的时候，应该增加次版本号。这意味着用户可以安全地更新，而不用担心现有功能被破坏。

**何时更新 MINOR 版本：**
- 在UI上增加了一个新的按钮或设置项（如"清空所有存档"）。
- 增加了一个新的自动化处理任务。
- 对现有功能进行优化，并引入了新的可选行为。
- 在UI上增加了版本号显示。

**示例：**
- 版本从 `2.1.8` 更新到 `2.2.0`。
- 版本从 `2.1.8-20250101` 更新到 `2.2.0-20250215`。

### 3. 修订号 (PATCH)

当您进行了**向后兼容的问题修复**时，应该增加修订号。这通常是针对现有功能中出现的bug或不符合预期的行为进行修正。

**何时更新 PATCH 版本：**
- 修复了"一键开刷"会错误添加已入库商品的问题。
- 修复了刷新页面后，脚本未能正确定位到上次浏览位置的问题。
- 调整了CSS样式，以解决UI按钮变形或文字换行的问题。
- 提高了脚本的性能或稳定性。

**示例：**
- 版本从 `2.1.0` 更新到 `2.1.1`。
- 版本从 `2.1.0-20250101` 更新到 `2.1.1-20250215`。

### 4. 日期标识

日期标识用于更精确地标记发布时间，特别是在同一语义版本号下有多次发布的情况。

**何时添加日期标识：**
- 需要清晰区分同一版本号的不同发布时间。
- 在热修复或紧急更新时，可能不方便更改语义版本号。
- 用于内部测试版本的标记。

**示例：**
- 版本从 `3.2.1` 更新到 `3.2.1-20250723`（同一版本的不同日期发布）。
- 测试版本标记为 `3.3.0-20250801-beta`。

---

## 总结

- **重大更新** (不兼容) -> `MAJOR++`
- **新增功能** (向后兼容) -> `MINOR++`, `PATCH=0`
- **修复问题** (向后兼容) -> `PATCH++`
- **精确发布** (同版本多次发布) -> 添加 `-YYYYMMDD` 日期标识 