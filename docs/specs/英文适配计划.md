---
Type: project
Status: active
Start: 2025-08-15
Due:
Owner:
Tags:
tags:
  - FabHelper
aliases: "#FabHelper"
---

# Fab Helper – 英文适配与问题清单（精简）

## 概述
- 目标：在英文站点提供完整英文体验，关键功能判定（免费/已拥有/添加）稳定。
- 文档：补充英文或双语说明。

## 目标
- 英文站显示英文 UI/提示/日志。
- 关键判定在英文站等价生效：
  - 免费（Free）
  - 已拥有（Saved in My Library / View in My Library / Product added to your library）
  - 领取按钮（Add to my library）

## 范围
- 文案：补全 Config.TEXTS.en，并统一通过 Utils.getText 获取。
- 关键词：核对 OWNED_SUCCESS_CRITERIA/ACQUISITION_TEXT_SET/FREE_TEXT_SET 的英文集合。
- 语言检测：强化 Utils.detectLanguage，多信号判定，默认回退 en。
- UI：按语言切换按钮、标签、排序选项显示名。
- 同步：英文站也能清理"已拥有/非免费"的失败项。
- 文档：README/USER_GUIDE 提供英文或双语说明；CHANGELOG 记录"英文适配"。

## 进度总结
**完成度**: 🟢 **98%** - 国际化功能已全面完成

## 已完成项目

补全英文文本配置与常用提示日志键值（扩展配置文件，新增60+个中英文键值对） ✅ 2025-08-15

强化语言检测回退策略（添加语言状态属性和完整的语言检测逻辑） ✅ 2025-08-15

用户界面国际化支持（应用标题、标签页、按钮文本支持中英文切换） ✅ 2025-08-15

创建页面状态诊断工具（检测实际页面结构、动态内容、交互状态变化） ✅ 2025-08-15

优化日志输出（将频繁显示的调试信息移至调试模式） ✅ 2025-08-15

代码清理和优化（删除已弃用模块，清理120+行不可达代码） ✅ 2025-08-15

失败商品价格检查修复（修复失败商品缺少offerId导致价格检查失败） ✅ 2025-08-15

三个功能的英文国际化补全（自动添加任务、记住浏览位置、429自动恢复） ✅ 2025-08-15

状态历史记录文本国际化（修复状态历史显示中的硬编码中文文本） ✅ 2025-08-15

状态历史记录重复问题修复（新增智能去重检查机制） ✅ 2025-08-15

全面调试日志国际化（73个翻译键值对，67处硬编码修复，15个功能模块完整国际化） ✅ 2025-08-15

## 下一步行动（Next Actions）

🔥 高优先级 - 国际化完善

为 sortOptions 增加 EN 显示名 🔄 进行中

在英文站验证同步状态清理行为（从"失败"列表移除"已拥有/非免费"条目） 🔄 进行中

更新 README/USER_GUIDE/CHANGELOG 📋 待办

🔧 中优先级 - 功能优化

针对异常商品适配：ef0311b7-fd62-414a-b2c3-66ba95d8a21d（限时免费商品入库失败问题） 📋 待办

优化商品状态检测的容错性 📋 待办

## 近期改进
**2025-08-15 完成的工作**：
1. **完善国际化支持** - 补全了所有缺失的英文翻译
2. **修复核心问题** - 解决了失败商品价格检查和重复记录问题
3. **代码质量提升** - 清理冗余代码，消除警告
4. **功能稳定性** - 改进了同步机制和状态管理
5. **🎉 全面调试日志国际化** - 系统性解决所有中英文混用问题

**当前状态**：脚本的国际化功能已全面完成，所有功能在中英文站点都能提供完整的本地化体验。

**已解决的问题**：
- ✅ 失败商品缺少offerId导致价格检查失败
- ✅ 状态历史记录重复问题
- ✅ 三个功能的英文国际化缺失
- ✅ 状态历史显示的硬编码中文文本
- ✅ **所有调试日志的中英文混用问题**
- ✅ **状态报告UI的硬编码中文标签**
- ✅ **请求监控和检测系统的国际化**
- ✅ **缓存操作和任务执行的日志国际化**

**剩余工作量**：约2%，主要是排序选项国际化和文档更新。
