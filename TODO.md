# Fab Helper v2.0 改造计划与进度

本文件用于跟踪 Fab Helper 脚本的改造进度。

## 阶段一: 核心功能重构与UI大改版

- [x] **1. UI 界面大改版**
    - [x] 创建新的 HTML 和 CSS 结构，符合截图样式。
    - [x] 实现“仪表盘”和“设定”的标签页切换逻辑。
    - [x] 布局新的状态栏、主按钮和功能按钮。

- [x] **2. 移除“批量侦察”等 API 功能**
    - [x] 从代码中删除 `reconWithApi` 函数和相关逻辑。
    - [x] 移除 UI 上所有与“批量侦察”相关的按钮（如“批量侦察”、“重置侦察进度”）。

- [x] **3. 开发“失败标记 (✖)”功能**
    - [x] 在页面刷新逻辑中增加检查 `Database.isFailed` 的逻辑。
    - [x] 在失败的商品卡片上添加 `✖` 覆盖层。
    - [x] 确保“隐藏/显示”功能也对失败条目生效。

## 阶段二: 自动化与体验增强

- [x] **4. 开发“无限滚动自动添加新任务”**
    - [x] 在“设定”UI中添加此功能的开关。
    - [x] 修改 `MutationObserver` 回调，实现在执行任务时自动扫描并添加新出现的任务。
    - [x] 确保持久化保存开关的状态。

- [x] **5. 开发“记住瀑布流加载位置”**
    - [x] 在“设定”UI中添加此功能的开关。
    - [x] 使用 `GM_webRequest` 或其他方式监听并保存下一页的 `cursor` URL。
    - [x] 实现页面加载时自动跳转到上次保存的位置。
    - [x] 确保持久化保存开关的状态。

## 阶段三: 测试与优化

- [x] **6. 功能调试与日志增强**
    - [x] 为“记住位置”功能添加详细的执行日志。
    - [x] 将日志面板移动到“仪表盘”标签页，方便实时监控。

- [x] **7. 关键功能 Bug 修复与体验优化**
    - [x] 修复“设定”中的开关在点击时会触发两次的问题。
    - [x] 重构网络监听逻辑，确保能稳定捕获滚动加载事件。
    - [x] 为日志面板重新添加“复制”和“清除”按钮。

- [ ] 整体功能联调测试。
- [ ] 性能和稳定性优化。 